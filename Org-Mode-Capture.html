<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!--  4 03, 2023 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Org-Mode Capture 使用</title>
<meta name="author" content="ThinkCat" />
<meta name="keywords" content="emacs, org-mode post" />
<meta name="generator" content="Org Mode" />
<link rel='icon' type='image/x-icon' href='/images/favicon.ico'/>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<link rel='stylesheet' href='https://code.cdn.mozilla.net/fonts/fira.css'>
<link rel='stylesheet' href='/css/site.css?v=2' type='text/css'/>
<link rel='stylesheet' href='/css/custom.css' type='text/css'/>
<link rel='stylesheet' href='/css/syntax-coloring.css' type='text/css'/>
<script>
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
// @license-end
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="/"> UP </a>
 |
 <a accesskey="H" href="/"> HOME </a>
</div><header id="top" class="status">

 <!-- <div class='intro'>
 <img src='/images/about/profile.png' alt='ThinkCat' class='no-border'/>
<h3>ThinkCat</h3>
 <p>一个简单的开发者</p> 
</div>
-->

<div class='nav'>
<ul>
<li><b> ThinkCat </b> </li>
<li>&nbsp;&nbsp;</li>
<li><a href='/'>Blog</a>.</li>
<li><a href='/about/'>About</a></li>
</ul>
</div>
</header>
<main id="content" class="content">
<h1 class="title">Org-Mode Capture 使用
<br />
<span class="subtitle">发布于  8 17, 2020 by ThinkCat.</span>
</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgef84608">emacs 配置：</a></li>
<li><a href="#org620bb85">Makefile 配置：</a></li>
</ul>
</div>
</div>
<p>
好久不拿org-mode写文字，总是忘记一些快捷键。
</p>

<p>
现在都是通过emacs来编辑文章，并且一站式发布到github page。虽然这套工作流用了比较久，但是架不住懒，不写东西，还是容易忘。记录一下。
</p>

<p>
工作流：
</p>
<ol class="org-ol">
<li>C-c c，启用org-mode的capture。这个就是预制的文章模板，预定义了title，keywords，tags。</li>
<li>执行make [options] 命令预览或者发布到github page。</li>
</ol>

<p>
配置还是列一下，做个备份（虽然git里面已经有了）。
</p>


<section id="outline-container-orgef84608" class="outline-2">
<h2 id="orgef84608">emacs 配置：</h2>
<div class="outline-text-2" id="text-orgef84608">
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">org</span>
(setq org-html-validation-link nil)
(setq org-html-postamble nil)
(setq org-startup-indented t)
(setq org-startup-with-inline-images t)
(setq org-image-actual-width '(300))
(setq truncate-lines t)
(add-hook 'org-mode-hook 'toggle-truncate-lines)
(use-package org-bullets
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:config</span>
  (add-hook 'org-mode-hook (<span class="org-keyword">lambda</span> () (org-bullets-mode 1)))
  )
(global-set-key (kbd <span class="org-string">"C-c a"</span>) 'org-agenda)

<span class="org-comment-delimiter">;; </span><span class="org-comment">org capture</span>
(<span class="org-keyword">defun</span> <span class="org-function-name">create-blog-post</span> ()
        <span class="org-doc">"Create an org file in ~/source/myblog/posts."</span>
        (interactive)
        (<span class="org-keyword">let</span> ((name (read-string <span class="org-string">"Filename: "</span>)))
        (expand-file-name (format <span class="org-string">"%s.org"</span> name) <span class="org-string">"~/Documents/Blog/myblog/posts/"</span>)))
(setq org-capture-templates
        '((<span class="org-string">"p"</span> <span class="org-string">"Post"</span> plain
                (file create-blog-post)
                (file <span class="org-string">"~/Documents/Blog/myblog/capture-template/post.orgcaptmpl"</span>))))
(define-key global-map (kbd <span class="org-string">"C-c c"</span>)
  (<span class="org-keyword">lambda</span> () (interactive) (org-capture nil <span class="org-string">"p"</span>)))

</pre>
</div>
</div>
</section>


<section id="outline-container-org620bb85" class="outline-2">
<h2 id="org620bb85">Makefile 配置：</h2>
<div class="outline-text-2" id="text-org620bb85">
<pre class="example">

.PHONY: publish

EMACS = /Applications/Emacs.app/Contents/MacOS/Emacs

ifndef EMACS
EMACS = "emacs"
endif

all: publish deploy sources

publish: publish.el
	@echo "Publishing... with current Emacs configurations."
	${EMACS} --batch --load publish.el --funcall org-publish-all

preview: 
	@python3.7 -m http.server --directory=public

deploy:
	@echo "Copy CNAME"
	@cp CNAME public/
	@echo "Copy CNAME Ok"
	@echo "Start Push Git Page"
	@cp -rf public/* ~/tmp/public/
	@cd ~/tmp/public &amp;&amp; git add . &amp;&amp; git commit -m "update" &amp;&amp; git push
	@echo "Push Git Page Ok"

publish_no_init: publish.el
	@echo "Publishing... with --no-init."
	${EMACS} --batch --no-init --load publish.el --funcall org-publish-all

sources:
	@echo "Backup Source"
	@git add . &amp;&amp; git commit -m "update" &amp;&amp; git push

clean:
	@echo "Cleaning up.."
	@rm -rvf *.elc
	@rm -rvf public
	@rm -rvf ~/.org-timestamps/*

</pre>
</div>
</section>
</main>
<footer id="postamble" class="status">
<div class='footer'>
Copyright © 2020 <a href='mailto:juepei123@gmail.com'>ThinkCat</a><br>
Last updated on  2 07, 2023 using <a href="https://www.gnu.org/software/emacs/">Emacs</a> 28.2 (<a href="https://orgmode.org">Org</a> mode 9.5.5)
</div>
</footer>
</body>
</html>
