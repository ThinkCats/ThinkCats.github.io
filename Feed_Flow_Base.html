<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!--  4 03, 2023 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Feed Flow基础设计</title>
<meta name="author" content="ThinkCat" />
<meta name="keywords" content="feed_flow post" />
<meta name="generator" content="Org Mode" />
<link rel='icon' type='image/x-icon' href='/images/favicon.ico'/>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<link rel='stylesheet' href='https://code.cdn.mozilla.net/fonts/fira.css'>
<link rel='stylesheet' href='/css/site.css?v=2' type='text/css'/>
<link rel='stylesheet' href='/css/custom.css' type='text/css'/>
<link rel='stylesheet' href='/css/syntax-coloring.css' type='text/css'/>
<script>
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
// @license-end
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="/"> UP </a>
 |
 <a accesskey="H" href="/"> HOME </a>
</div><header id="top" class="status">

 <!-- <div class='intro'>
 <img src='/images/about/profile.png' alt='ThinkCat' class='no-border'/>
<h3>ThinkCat</h3>
 <p>一个简单的开发者</p> 
</div>
-->

<div class='nav'>
<ul>
<li><b> ThinkCat </b> </li>
<li>&nbsp;&nbsp;</li>
<li><a href='/'>Blog</a>.</li>
<li><a href='/about/'>About</a></li>
</ul>
</div>
</header>
<main id="content" class="content">
<h1 class="title">Feed Flow基础设计
<br />
<span class="subtitle">发布于  8 18, 2020 by ThinkCat.</span>
</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org0f4c62e">功能</a></li>
<li><a href="#org119d134">设计</a></li>
<li><a href="#orgb4255bc">预估量：1000w用户</a></li>
<li><a href="#org98342e6">方案</a>
<ul>
<li><a href="#org7950b79">基础架构</a>
<ul>
<li><a href="#orgcf23060">工具</a></li>
</ul>
</li>
<li><a href="#org99312d4">持久化数据</a>
<ul>
<li><a href="#orgf0ad4da">Account</a></li>
<li><a href="#orgbfcebba">Follow</a></li>
<li><a href="#orge54f372">Focus</a></li>
<li><a href="#org54f61f7">Feed</a></li>
<li><a href="#org8187582">Feed_Comment</a></li>
<li><a href="#org49b5c96">Feed_Like_Account</a></li>
<li><a href="#org9254026">Comment_Like_Account</a></li>
<li><a href="#orgd7026fc">IM [TODO]</a></li>
</ul>
</li>
<li><a href="#orgdb33624">缓存数据</a>
<ul>
<li><a href="#org6a868b9">1.手机验证码</a></li>
<li><a href="#orgf659877">2.点赞数据</a></li>
<li><a href="#org8a599bc">3.用户推荐feed队列，上限1000</a></li>
<li><a href="#org9c4cc9e">4.用户在线状态</a></li>
</ul>
</li>
<li><a href="#orgebd327b">接口设计</a>
<ul>
<li><a href="#orga246001">基本原则</a></li>
<li><a href="#orgd0c6e0e">通用返回</a></li>
<li><a href="#orge3e1b4a">账号</a></li>
<li><a href="#org92c064a">Feed</a></li>
<li><a href="#orgd25e938">Comment</a></li>
<li><a href="#org2bf9006">Like</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<section id="outline-container-org0f4c62e" class="outline-2">
<h2 id="org0f4c62e">功能</h2>
<div class="outline-text-2" id="text-org0f4c62e">
<p>
做一个feed流项目，类似微博、朋友圈的功能，用户量预估比较小。主要有：
</p>
<ol class="org-ol">
<li>用户注册、登录</li>
<li>用户关系绑定：关注（加好友）、取关（删除好友），好友关系并非是严格的完整双向关系。</li>
<li>feed流数据维护：关注下可见，取关不可见</li>
<li>feed流数据可见性维护：仅限自己和好友</li>
<li>点赞、评论功能，评论均可见</li>
<li>好友聊天</li>
</ol>
</div>
</section>

<section id="outline-container-org119d134" class="outline-2">
<h2 id="org119d134">设计</h2>
<div class="outline-text-2" id="text-org119d134">
<ol class="org-ol">
<li>用户账号体系统一以mobile为唯一区分</li>
<li>feed推模式：feed产生后，推送到不同的用户队列下</li>
<li>推荐feed，feed_id推送到用户的redis队列中，队列保持固定大小，新的feed放到前面</li>
<li>一条feed推送时候，可以按一定的规则，推送到不同的用户下</li>
<li>读取过的feed从队列中移除，一个feed仅被浏览一次。队列变小时候，发起推送补充。</li>
<li>推荐feed，翻页查询的时候，无需偏移量，仅需要limit</li>
<li>关注feed，按focus关注关系表，关联到feed表中的account_id,查询feed(多线程并发查询，并发量与分表数相同，考虑使用countDownLatch模式)。</li>
<li>分表策略：feed表按account_id分表</li>
<li>采用redis队列维护推荐feed，队列需要保证进去过的feed，极少会再次进来(拉取后从队列中移除，触发推送补充，补充尽量随机从不同分表中获取feed,采用布隆过滤器)</li>
</ol>
</div>
</section>

<section id="outline-container-orgb4255bc" class="outline-2">
<h2 id="orgb4255bc">预估量：1000w用户</h2>
<div class="outline-text-2" id="text-orgb4255bc">
<ol class="org-ol">
<li>对应1000w的用户推荐feed队列，每个队列上限1000，内存不超过4G</li>
<li>每个用户平均产生1000条feed，共100亿数据，分表256张，平均单表5000w数据量，优化索引，可以支持</li>
<li>服务器CPU，内存性能，TODO</li>
</ol>
</div>
</section>

<section id="outline-container-org98342e6" class="outline-2">
<h2 id="org98342e6">方案</h2>
<div class="outline-text-2" id="text-org98342e6">
</div>
<div id="outline-container-org7950b79" class="outline-3">
<h3 id="org7950b79">基础架构</h3>
<div class="outline-text-3" id="text-org7950b79">
</div>
<div id="outline-container-orgcf23060" class="outline-4">
<h4 id="orgcf23060">工具</h4>
<div class="outline-text-4" id="text-orgcf23060">
<ol class="org-ol">
<li>持久化： mysql</li>
<li>缓存队列： redis</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org99312d4" class="outline-3">
<h3 id="org99312d4">持久化数据</h3>
<div class="outline-text-3" id="text-org99312d4">
</div>
<div id="outline-container-orgf0ad4da" class="outline-4">
<h4 id="orgf0ad4da">Account</h4>
<div class="outline-text-4" id="text-orgf0ad4da">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">id</td>
<td class="org-left">bigint</td>
<td class="org-left">key</td>
</tr>

<tr>
<td class="org-left">account</td>
<td class="org-left">varchar(50)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">password</td>
<td class="org-left">varchar(50)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">mobile</td>
<td class="org-left">char(11)</td>
<td class="org-left">unique</td>
</tr>

<tr>
<td class="org-left">nick_name</td>
<td class="org-left">varchar(30)</td>
<td class="org-left">default:xxx</td>
</tr>

<tr>
<td class="org-left">avatar</td>
<td class="org-left">text</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">sex</td>
<td class="org-left">tinyint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">age</td>
<td class="org-left">tinyint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">area</td>
<td class="org-left">char(100)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">status_desc</td>
<td class="org-left">char(100)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">create_time</td>
<td class="org-left">datetime</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">update_time</td>
<td class="org-left">datetime</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<hr />
</div>
</div>
<div id="outline-container-orgbfcebba" class="outline-4">
<h4 id="orgbfcebba">Follow</h4>
<div class="outline-text-4" id="text-orgbfcebba">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">id</td>
<td class="org-left">bigint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">account_id</td>
<td class="org-left">bigint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">follower_id</td>
<td class="org-left">bigint</td>
<td class="org-left">fans account id</td>
</tr>

<tr>
<td class="org-left">create_time</td>
<td class="org-left">datetime</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<hr />
</div>
</div>

<div id="outline-container-orge54f372" class="outline-4">
<h4 id="orge54f372">Focus</h4>
<div class="outline-text-4" id="text-orge54f372">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">id</td>
<td class="org-left">bigint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">account_id</td>
<td class="org-left">bigint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">focus_id</td>
<td class="org-left">bigint</td>
<td class="org-left">focus account id</td>
</tr>

<tr>
<td class="org-left">create_time</td>
<td class="org-left">datetime</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<hr />
</div>
</div>

<div id="outline-container-org54f61f7" class="outline-4">
<h4 id="org54f61f7">Feed</h4>
<div class="outline-text-4" id="text-org54f61f7">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">id</td>
<td class="org-left">bigint</td>
<td class="org-left">key</td>
</tr>

<tr>
<td class="org-left">account_id</td>
<td class="org-left">bigint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">body</td>
<td class="org-left">text</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">files</td>
<td class="org-left">text</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">area</td>
<td class="org-left">varchar(50)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">topic_ids</td>
<td class="org-left">varchar(100)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">visible_type</td>
<td class="org-left">tinyint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">likeCount</td>
<td class="org-left">int</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">commentCount</td>
<td class="org-left">int</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">delete</td>
<td class="org-left">tinyint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">create_time</td>
<td class="org-left">datetime</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">soft_del_time</td>
<td class="org-left">datetime</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<hr />
</div>
</div>
<div id="outline-container-org8187582" class="outline-4">
<h4 id="org8187582">Feed_Comment</h4>
<div class="outline-text-4" id="text-org8187582">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">id</td>
<td class="org-left">bigint</td>
<td class="org-left">key</td>
</tr>

<tr>
<td class="org-left">feedId</td>
<td class="org-left">bigint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">comment</td>
<td class="org-left">text</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">account_id</td>
<td class="org-left">bigint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">create_time</td>
<td class="org-left">datetime</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">update_time</td>
<td class="org-left">datetime</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<hr />
</div>
</div>
<div id="outline-container-org49b5c96" class="outline-4">
<h4 id="org49b5c96">Feed_Like_Account</h4>
<div class="outline-text-4" id="text-org49b5c96">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">id</td>
<td class="org-left">bigint</td>
<td class="org-left">key</td>
</tr>

<tr>
<td class="org-left">feedId</td>
<td class="org-left">bigint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">likeAccountId</td>
<td class="org-left">bigint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">create_time</td>
<td class="org-left">datetime</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">update_time</td>
<td class="org-left">datetime</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<hr />
</div>
</div>
<div id="outline-container-org9254026" class="outline-4">
<h4 id="org9254026">Comment_Like_Account</h4>
<div class="outline-text-4" id="text-org9254026">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">id</td>
<td class="org-left">bigint</td>
<td class="org-left">key</td>
</tr>

<tr>
<td class="org-left">commentId</td>
<td class="org-left">bigint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">likeAccountId</td>
<td class="org-left">bigint</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">create_time</td>
<td class="org-left">datetime</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">update_time</td>
<td class="org-left">datetime</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-orgd7026fc" class="outline-4">
<h4 id="orgd7026fc">IM [TODO]</h4>
</div>
</div>

<div id="outline-container-orgdb33624" class="outline-3">
<h3 id="orgdb33624">缓存数据</h3>
<div class="outline-text-3" id="text-orgdb33624">
</div>
<div id="outline-container-org6a868b9" class="outline-4">
<h4 id="org6a868b9">1.手机验证码</h4>
<div class="outline-text-4" id="text-org6a868b9">
<p>
key: type + mobile, value(String): verify_code
</p>
</div>
</div>
<div id="outline-container-orgf659877" class="outline-4">
<h4 id="orgf659877">2.点赞数据</h4>
<div class="outline-text-4" id="text-orgf659877">
<p>
key: type + feed_id, value(List): 点赞的账号id
</p>
</div>
</div>
<div id="outline-container-org8a599bc" class="outline-4">
<h4 id="org8a599bc">3.用户推荐feed队列，上限1000</h4>
<div class="outline-text-4" id="text-org8a599bc">
<p>
key：type + account_id, value(List): feed_id
</p>
</div>
</div>
<div id="outline-container-org9c4cc9e" class="outline-4">
<h4 id="org9c4cc9e">4.用户在线状态</h4>
<div class="outline-text-4" id="text-org9c4cc9e">
<p>
key: type + account_id, 有时效性，过期则认为不在线
</p>
</div>
</div>
</div>

<div id="outline-container-orgebd327b" class="outline-3">
<h3 id="orgebd327b">接口设计</h3>
<div class="outline-text-3" id="text-orgebd327b">
</div>
<div id="outline-container-orga246001" class="outline-4">
<h4 id="orga246001">基本原则</h4>
<div class="outline-text-4" id="text-orga246001">
<p>
除账户注册与登录接口，其他接口均需访问时候，在Header中增加token。
</p>
</div>
</div>

<div id="outline-container-orgd0c6e0e" class="outline-4">
<h4 id="orgd0c6e0e">通用返回</h4>
<div class="outline-text-4" id="text-orgd0c6e0e">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">success</td>
<td class="org-left">Boolean</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">code</td>
<td class="org-left">Integer</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">errMsg</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">data</td>
<td class="org-left">&lt;T&gt;</td>
<td class="org-left">业务数据</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orge3e1b4a" class="outline-4">
<h4 id="orge3e1b4a">账号</h4>
<div class="outline-text-4" id="text-orge3e1b4a">
</div>
<ul class="org-ul">
<li><a id="org85e815e"></a>注册<br />
<div class="outline-text-5" id="text-org85e815e">
<p>
url:[Post]  /api/account/regist
</p>

<p>
入参：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">account</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">password</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">mobile</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">verifyCode</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">type</td>
<td class="org-left">Integer</td>
<td class="org-left">Regist Type</td>
</tr>
</tbody>
</table>

<p>
出参： 通用返回
</p>
<hr />
</div>
</li>

<li><a id="org223c54d"></a>登录<br />
<div class="outline-text-5" id="text-org223c54d">
<p>
url:[Post] /api/account/login
</p>

<p>
入参：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">account</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">password</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">mobile</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">verifyCode</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">type</td>
<td class="org-left">Integer</td>
<td class="org-left">Regist Type</td>
</tr>
</tbody>
</table>

<p>
出参： 通用返回+业务数据 T&lt;String&gt;: token
</p>

<hr />
</div>
</li>
<li><a id="org92d2be2"></a>更新基本信息<br />
<div class="outline-text-5" id="text-org92d2be2">
<p>
url:[Post] /api/account/update
</p>

<p>
入参：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">accountId</td>
<td class="org-left">Long</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">nickname</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">age</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">avatar</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
出参： 通用返回
</p>

<hr />
</div>
</li>
<li><a id="org10ae14d"></a>换绑手机<br />
<div class="outline-text-5" id="text-org10ae14d">
<p>
url:[Post] /api/account/bindMobile
</p>

<p>
入参：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">accountId</td>
<td class="org-left">Long</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">mobile</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">verifyCode</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
出参： 通用返回
</p>

<hr />
</div>
</li>
<li><a id="org32be176"></a>查询账号信息<br />
<div class="outline-text-5" id="text-org32be176">
<p>
url:[Get] /api/account/{accountId}
</p>

<p>
出参：通用返回+业务数据 T (结构如下)
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">accountId</td>
<td class="org-left">Long</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">nickname</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">age</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">avatar</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">mobile</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">area</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">status_desc</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</div>

<div id="outline-container-org92c064a" class="outline-4">
<h4 id="org92c064a">Feed</h4>
<div class="outline-text-4" id="text-org92c064a">
</div>
<ul class="org-ul">
<li><a id="org74edab5"></a>发表内容<br />
<div class="outline-text-5" id="text-org74edab5">
<p>
url: [Post] /api/feed/post
</p>

<p>
入参：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">body</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">files</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">area</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">topics</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">visibleType</td>
<td class="org-left">Integer</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<hr />
</div>
</li>
<li><a id="orgd8801c2"></a>拉取内容/列表<br />
<div class="outline-text-5" id="text-orgd8801c2">
<p>
url: [Get] /api/feed /[list]
</p>

<p>
入参：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">type</td>
<td class="org-left">Integer</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">offset</td>
<td class="org-left">Integer</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">size</td>
<td class="org-left">Integer</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
出参：业务数据 [List]&lt;T&gt;
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">body</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">files</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">area</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">topics</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">likeCount</td>
<td class="org-left">Integer</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">commentCount</td>
<td class="org-left">Integer</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">postTime</td>
<td class="org-left">Date</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgd25e938" class="outline-4">
<h4 id="orgd25e938">Comment</h4>
<div class="outline-text-4" id="text-orgd25e938">
</div>
<ul class="org-ul">
<li><a id="org35cbb91"></a>发布评论<br />
<div class="outline-text-5" id="text-org35cbb91">
<p>
url:[Post] /api/comment
</p>

<p>
入参：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">feedId</td>
<td class="org-left">Long</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">writerAccount</td>
<td class="org-left">Long</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">comment</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">files</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">likeCount</td>
<td class="org-left">Integer</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
出参：通用返回
</p>

<hr />
</div>
</li>
<li><a id="orgb9439ed"></a>获取评论<br />
<div class="outline-text-5" id="text-orgb9439ed">
<p>
url: [Get] /api/comment/list
</p>

<p>
入参：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">feedId</td>
<td class="org-left">Long</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">accountId</td>
<td class="org-left">Long</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">offset</td>
<td class="org-left">Integer</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">size</td>
<td class="org-left">Integer</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
出参: 业务数据 T
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">feedId</td>
<td class="org-left">Long</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">writerAccount</td>
<td class="org-left">Long</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">comment</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">files</td>
<td class="org-left">String</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">likeCount</td>
<td class="org-left">Integer</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</div>

<div id="outline-container-org2bf9006" class="outline-4">
<h4 id="org2bf9006">Like</h4>
<div class="outline-text-4" id="text-org2bf9006">
</div>
<ul class="org-ul">
<li><a id="org9575526"></a>点赞<br />
<div class="outline-text-5" id="text-org9575526">
<p>
url:[Post] /api/like
</p>

<p>
入参:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">字段</th>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">likeId</td>
<td class="org-left">Long</td>
<td class="org-left">feedId or CommentId</td>
</tr>

<tr>
<td class="org-left">likeType</td>
<td class="org-left">Integer</td>
<td class="org-left">feed or comment</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</div>
</div>
</section>
</main>
<footer id="postamble" class="status">
<div class='footer'>
Copyright © 2020 <a href='mailto:juepei123@gmail.com'>ThinkCat</a><br>
Last updated on  2 07, 2023 using <a href="https://www.gnu.org/software/emacs/">Emacs</a> 28.2 (<a href="https://orgmode.org">Org</a> mode 9.5.5)
</div>
</footer>
</body>
</html>
